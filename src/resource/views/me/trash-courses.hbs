<div class="container mt-4">
    <div>
      <h3>Khóa học đã xóa</h3>
      
    </div>

    <table class="table table-striped">
  <thead>
    <tr>
        <th scope="col">#</th>
        <th scope="col">Tên khóa học</th>
        <th scope="col">Trình độ</th>
        <th scope="col">Thời gian xóa</th>
        <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    {{#each courses}}
            <tr>
                <th scope="row">{{plus @index}}</th>
                <td>{{this.name}}</td>
                <td>{{this.level}}</td>
                <td>{{this.deletedAt}}</td>
                <td>
                  <button type="button" class="btn btn-warning"  data-toggle="modal" data-target="#restoreModal" data-id="{{this._id}}" data-whatever="{{this.name}}">restore</button>
                  <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal" data-id="{{this._id}}" data-whatever="{{this.name}}">Hard Delete</button>
                </td>
                
            </tr>
    {{else}}
      <tr><td colspan="5" class="text-center">Chưa có khóa học nào bị xóa! <a href="/me/stored/courses">Danh sách khóa học.</a></td></tr>
    {{/each}}
    
  </tbody>
</table>
  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Hành động này không thể khôi phục! Bạn thật sự muốn xóa khóa học :</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body ">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="btn-delete-course">Destroy</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="restoreModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Khôi phục khóa học này ?</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body-restore ">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="btn-restore-course">Restore</button>
        </div>
      </div>
    </div>
  </div>
</div>

{{!-- Delete hidden form --}}
 <form name="deleteForm" method="POST" action=""></form>
 <form name="restoreForm" method="POST" action=""></form>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      const formDelete = document.forms['deleteForm']
      const buttonDelete = document.getElementById('btn-delete-course')
      const modalBody = document.querySelector('.modal-body')
    //When dialog confirm clicked
    $('#deleteModal').on('show.bs.modal', function (event) {
      const button = $(event.relatedTarget) 
      const courseId = button.data('id') 
      const courseName = button.data('whatever') 
      modalBody.innerHTML = courseName
      buttonDelete.onclick = function() {
        
        formDelete.action = '/course/'+courseId+'/destroy?_method=DELETE'
        formDelete.submit();
      }
    })
})
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      const formRestore = document.forms['restoreForm']
      const buttonRestore = document.getElementById('btn-restore-course')
      const modalBody = document.querySelector('.modal-body-restore')
    //When dialog confirm clicked
    $('#restoreModal').on('show.bs.modal', function (event) {
      const button = $(event.relatedTarget) 
      const courseId = button.data('id') 
      const courseName = button.data('whatever') 
      modalBody.innerHTML = courseName
      buttonRestore.onclick = function() {
        formRestore.action = '/course/'+courseId+'/restore?_method=PATCH'
        formRestore.submit();
      }
    })
})
</script>